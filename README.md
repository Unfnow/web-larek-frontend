# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Описание
Для грамотной работы программы необходимо реализовать Model-View-Presenter паттерн

## Model
-работает с данными, проводит вычисления и руководит всеми бизнес-процессами.
Классы:
Model: Отвечает за Backend чать приложения
Поля:

Функции:
-cardCreator(): Должен отвечать за формирнование данных передачу их в Presenter
-cardDataParcer(): Отвечает за отправку запроса на сервер для получения данных карточки
-userDataSender(): Обработчик события отправки заказа на сервер 
Интерфейсы:
-CardValues: 
    "id": string,
    "description": string,
    "image": string,
    "title": string,
    "category": string,
    "price": number

## View
-показывает пользователю интерфейс и данные из модели.
Классы:
-CardViewer: Должен содержать  методы для работы с карточками(оброботка открытия/закрытия)
-Button: Основной обработчик для кнопок. Из негонаследуются все остальные классы кнопок в интерфейсе
-ButtonCart: Будет содержать методы связанные с интерфейсом корзины (Возможно имеет смысл наделать класс на каждую кнопку, но тогда будет просто запутаться)
-ButtonPopup: Обработчик  кнопок попапа
-CartIcon: Будет отвечать за изменения иконки корзины
-CartPopup: Должен отображать все варианты окон интерфейса корзины
-CardForm: Отвечаетза формы на интерфейсе
-GuiError: Отображает ошибки на интерфейсе
Методы:
-orderError(): Отображает ошибку при попытке заказа, если корзина пуста.
-parceError(): Отображает ошибку загрузки карточек

## Presenter
-служит прослойкой между моделью и видом.
Классы:
-CardUnbox: Отвечает за отоброжение данных на карточке в правильных местах
-UserOrderData: Должен собирать вместе данные пользователя и его заказ
-EventEmitter: Отвечает за обработку всех событий

Интерфесы:
-OrderData:
    "orderId": string[], (В корзине может быть больше одного значения)
    "userMail": string, -почта пользователя
    "userPhone": string, -телефон пользователя
    "userAdress": string, -домашний адресс пользователя
    "payType": boolean (Тут может быть только 2 варианта, поэтому можно сделать проверку на true/false)



## Описание взаимодействия классов

При запуске программы инициализируется класс Model. Который при создании с помощью метода cardDataParcer() делает запрос на сервер и получает данные о товарах. В случае ошибки соответствующее окошко должно появиться в слое View с информацией об ошибке при помощи метода parceError() класса GuiError . После чего вызывает метод cardCreator() и передаёт данные с сервера в слой Presenter. В нём класс CardUnbox в конструкторе вызовет для каждого набора данных метод для отображения карточки и задаст каждому полю нужное значение.


В слое Presenter есть класс EventEmitter, в котором находится слушатель всех событий:

-Изменение данных корзины: при нажатии кнопки добавления/удаления товара срабатывает обработчик, который передаёт в слой Model массив товаров в корзине, а в слой View передаётся кол-во предметов в корзине, Которое отображается при помощи класса CartIcon.

-Оформление заказа: при нажатии кнопки формирования заказа все данные формы собираются в объект order, после чего в слое Model вместе с данными заказа формируют новый объект, который отправляется на сервер.

-Открытие попал окон: при нажатии на карточку обработчик вызывает метод cardView слоя CardViewer, который откроет карточку по макету.

-Ошибка при сборке заказа: обработчик должен вызвать метод orderError(), если пользователь пытается оформить заказ, когда корзина пуста.